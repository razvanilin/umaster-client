<div ng-controller="TemplatesCtrl">
<ng-include ng-if="loggedin && page == 'register-activity'" src="'views/registerActivity.html'"></ng-include>

<div ng-show="page == 'templates'" class="row">
  <div ng-show="temp.active" ng-repeat="temp in templates">
    <div class="clearfix" ng-if="$index % 3 == 0"></div>
    <div class="col s12 m4">
      <div class="card grey lighten-5 z-depth-1 hoverable">
        <div class="card-content">
          <span class="card-title">
            <a href="#{{temp.template_id}}" class="grey-text text-darken-3" modal>{{temp.name}}</a>
          </span>
          <p>
            <img src="{{temp._creator.profile.picture}}" class="circle" height="20px"> {{temp._creator.profile.nickname}}
          </p>
        </div>
        <div class="card-action">
          <a class="waves-effect waves-light" ng-click="editTemplate(temp)"><i class="fa fa-pencil-square-o"></i> Edit</a>
          <a class="waves-effect waves-light red-text text-darken-4" ng-click="deleteTemplate(temp, $index)"><i class="fa fa-trash"></i> Remove</a>
        </div>
      </div>
    </div>

    <!-- Description modal -->
    <div id="{{temp.template_id}}" class="modal">
      <div class="modal-content">
        <h3>{{temp.name}}</h3>
        <p class="flow-text">Custom Fields:</p>
        <ul class="collection">
          <li class="collection-item" ng-repeat="arg in temp.args">
            <span class="title">{{arg.label}} - {{arg.type}}</span>
          </li>
        </ul>
      </div>
      <div class="modal-footer">
        <a class="modal-action modal-close waves-effect btn-flat">Close</a>
      </div>
    </div>

  </div>
</div>

<div class="fixed-action-btn" style="bottom: 60px; right: 24px;">
  <a class="btn-floating btn-large" ng-click="navigate('register-activity')">
    <i tooltipped class="material-icons" data-position="left" data-delay="50" data-tooltip="Create a template">create</i>
  </a>
</div>
</div>
